["function _a35b413eb4202831b8f03c6a2916c49378a8ae99",50,288554,"abel",429887,32,"abel",412703,37,"label\"",288583,256863,",{name:\"discogsId",544875,35,"DetailItem",544672,48,"resource_url\"},{name:\"title\"},{name:\"artistlabel\"},{name:\"year",544875,35,"FeedItem",544672,48,545350,96,",{name:\"timeAgo\"},{name:\"username\"},{name:\"userActivity\"",554623,33,"Logi",554992,42,545524,272,"username",545813,112,546727,49,545951,678,"password",546633,51," \"",546700,4230,"var f=getParseUser();me.launchUserScreen(me,f",551065,413,551500,265,"a",556428,46,551833,65,"var b=getParseUser();if(b){me.launchUserScreen(me,b)}else{me.getViewport().add(a);",552110,427,",launchUserScreen:function(b,a){parseCheckToken(function(c){console.log(\"in launch verify token is \"+c);if(c){console.log(\"MyController: redirecting to FEED\");b",549789,92,"b.feed",551998,32,"FeedContainer\",{});b",551861,37,"b.getViewport().add(b.feedView)}else{console.log(\"MyController: redirecting to OAUTH\");b.oauth",551998,32,"OAuthContainer\",{});b",551861,37,"b.getViewport().add(b.oauthView)}}",554140,38,552573,192,",\"button#feedButton\":{tap:\"onFeedTap\"},\"button#wantsViewButton\":{tap:\"onWants",549386,51,552760,400,",onFeedTap:function(d,f,c){feed",551998,32,"Feed",552840,103,"feedView)},onWantsTap:function(d,f,c){wants",551998,32,"Wants",552840,103,"wantsView)},onDiscogsTap:function(d,f,c){oauth",551998,32,"OAut",552839,104,"oauthView",554140,38,553196,290,"action:\"onSearchfieldAction",553513,61,"},\"#searchResultsItems\":{itemtap:\"onItemTap\"},\"container#searchContainer\":{remove:\"onSearchContainerRemove\"}}},onSearchfieldAction:function(c,f,a){var d=c.getValue().trim();var b=this;b.clearImageInterval();if(d.length>0){searchDiscogs(d,function(e,i,j){console.log(\"SearchCallBack: begin ------------\");console.log(e);console.log(\"SearchCallBack: end ------------\");if(i>0){var g=new ",553775,53,"e.results});b",553876,34,"g);var h=setInterval(function(){getLocalImages(j,function(l){if(l.status==200||l.status==204){b.clearImageInterval();if(l.results){for(var m=0;m<l.results.length;m++){var k=g.getAt(m);k.set(\"thumb\",l.results[m])}}}})},2500);b.setImageInterval(h)}else{console.log(\"SearchCallBack: no results\")}})}",553985,123,"h,a,g,d){console.log(\"SearchController: onItemtap: \"+h._record.data.id);var f=this;f.clearImageInterval();f.successCB=function(j){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"SearchController: results from getRecordDiscogsAndUserData: \");console.log(j);var i=Ext.create(\"Recccords.view.DetailContainer\",{});i.setData(j);var e=f.getViewport();e.add(i);Ext.Viewport.setActiveItem(i)};f.failCB=function(e){console.log(\"SearchController: getRecordDiscogsAndUserData failed error : \"+e)};h.setStyle(\"background-color:rgb(200,200,200);\");getRecordDiscogsAndUserData(h._record.data.id,f.successCB,f.failCB)},onSearchContainerRemove:function(a,d,b,c){this.clearImageInterval()},clearImageInterval:function(){if(this.imagePollingInterval){clearInterval(this.imagePollingInterval)}},setImageInterval:function(a){this.clearImageInterval();this.imagePollingInterval=a",554141,177,",detailContainer:\"#detailContainer",553419,34,"#collectionItems\":{itemtap:\"onDataviewItemTap\"}}},onDataviewItemTap:function(b,c,h,a,g,d){console.log(\"CollectionController: onDataviewItemtap: \"+h._record.data.discogsId);var f=this;f.successCB=function(j){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"CollectionController: results from getRecordDiscogsAndUserData: \");console.log(j);var i=Ext.create(\"Recccords.view.DetailContainer\",{});i.setData(j);i.down(\"#detailBar\").setTitle(j.discogsData.title);var e=f.getViewport();e.add(i);Ext.Viewport.setActiveItem(i)};f.failCB=function(e){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"CollectionController: getRecordDiscogsAndUserData failed error : \"+e)};h.setStyle(\"background-color:rgb(200,200,200);\");getRecordDiscogsAndUserData(h._record.data.discogsId,f.successCB,f",548394,34,"controller.Detail",548797,53,"detailContainer:\"#detailContainer\"},control:{\"button#recordBackButton\":{tap:\"onButtonTap\"}}},onButton",551458,33,"onbackbutton\");b.getParent().getParent().getParent().remove(b.getParent().getParent()",554140,38,"Feed",548797,53,553421,32,"#wantItems\":{itemtap:\"onDataviewItemTap\"}}},onDataviewItemTap:function(b,c,h,a,g,d){console.log(\"CollectionController: onDataviewItemtap: \"+h._record.data.discogsId);var f=this;f.successCB=function(j){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"CollectionController: results from getRecordDiscogsAndUserData: \");console.log(j);var i=Ext.create(\"Recccords.view.DetailContainer\",{});i.setData(j);i.down(\"#detailBar\").setTitle(j.discogsData.title);var e=f.getViewport();e.add(i);Ext.Viewport.setActiveItem(i)};f.failCB=function(e){console.log(\"CollectionController: getRecordDiscogsAndUserData failed error : \"+e)};getRecordDiscogsAndUserData(h._record.data.discogsId,f.successCB,f",548394,34,"controller.OAuth",548797,53,"oauthContainer:\"#oauthContainer\"},control:{\"button#connectButton\":{tap:\"onConnectButtonTap\"},\"button#logoutUserButton\":{tap:\"onLogoutUserButtonTap\"}}},onConnectButtonTap:function(b,c,a){window.location.href=\"/auth/connect\"},onLogoutUserButton",551458,39," tapped\");parseLogOut()",554319,746,"scrollable:\"vertical\",items:[",555333,46,"25 25 15 25\"",555279,41,"Search\"},{xtype:\"button\",id:\"feedButton\",margin:\"0 25 15 25\"",555279,41,"Feed",555202,58,"15 25\"",555279,74,"wantsViewButton\",margin:\"0 25 15 25\"",555279,41,"Wants\"},",555072,50,"0 25 15 25\",minHeight:3",555278,42,555188,37,555473,43,"3",555278,42,"Logout\"",554623,33,555599,47,"id:\"search",547052,49,555684,373,"id:\"searchResults",547052,40,556086,850,556942,39,",src:\"\"",557993,74,557055,112,",listeners:[{fn:\"onImgError\",event:\"error\",delegate:\"#img\"},{fn:\"onBtnTap\",event:\"tap\",delegate:\"#btn\"}]},onImgError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder.png\")},onBtnTap:function(d,g,c){var b=this.getRecord();var f",557366,51,"var a",557425,59,"saveToCollection(b.data,f,a);g.stopPropagation()",557167,190,"callParent(arguments)",554318,32,557708,360,",listeners:[{fn:\"onImgError\",event:\"error\",delegate:\"#img\"}]},onImgError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder.png\")",557167,73,558141,156,554318,32,"Detail",546143,33,"config:{id:\"DetailContainer",556139,34,"layout:\"fit",547075,39,"id:\"detailBar\",title:\"Record\",items:[{xtype:\"button\",id:\"recordBackButton\",ui:\"back\",text:\"Back\"}]},{xtype:\"container\",id:\"detailContent\",layout:\"vbox\",scrollable:\"vertical\",items:[{xtype:\"container\",centered:false,height:260,id:\"detailImageC",559421,39,"image\",flex:1,height:240,id:\"detailImage\",itemId:\"myimg1\",maxWidth:\"100%\"",557853,32,"zIndex:11,backgroundCls:\"detailImageBackground\"}]},{xtype:\"container\",id:\"textContainer",556139,34,"zIndex:100,layout:\"vbox\",items:[{xtype:\"container\",id:\"recordButtonsContainer\",margin:\"10 10 ",547131,33,"\",id:\"addToCollectionButton\",itemId:\"mybutton15\",padding:\"5 0 0 0 \",width:146,text:\"Add to ",555320,33,"addToWantsButton\",itemId:\"mybutton16\",padding:\"5 0 0 0 \",width:146,text:\"Add to Wants\"}]},{xtype:\"container\",html:\"Album  Name\",id:\"detailAlbum\",margin:\"10 10 0 10\"},{xtype:\"container\",html:\"Artist Name\",id:\"detailArtist\",margin:\"0 10 \",layout:\"vbox\"},{xtype:\"container\",html:\"Label Year US 123456\",id:\"detailRecord\",margin:\"0 10 \",layout:\"vbox\"},{xtype:\"container\",html:\"Friends who have this\",id:\"detailFriends\",margin:\"0 10\",padding:\"0 0 10 0\"},{xtype:\"container\",html:\"Track list\",id:\"detailTracks\",margin:\"10 10\"}]}]}],listeners:[{fn:\"onDetailImageError\",event:\"error\",delegate:\"#detailImage\"},{fn:\"onAddToCollection",556288,34,"addToCollectionButton\"},{fn:\"onAddToWants",556288,34,"addToWantsButton\"},{fn:\"onDetail",547577,36,",{fn:\"onDetailContainerRemove\",event:\"remove\"}]},onDetailImageError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder-large.png\")},onAddToCollectionButton",549651,33,"DetailContainer: onAddToCollectionButtonTap\");var d=function(e){c.setDisabled(true);var g={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};c.setStyle(g);Ext.Msg.alert(\"Added to Collection\")};var a=function(e){console.log(\"error \"+e);Ext.Msg.alert(\"Error adding to Collection\")};saveToCollectionWithDiscogsData(this._data.discogsData,d,a)},onAddToWantsButton",549651,33,"DetailContainer: onAddToWantsButtonTap\");var d=function(e){c.setDisabled(true);var g={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};c.setStyle(g);Ext.Msg.alert(\"Added to Wants\")};var a=function(e){console.log(\"error \"+e);Ext.Msg.alert(\"Error adding to Wants\")};saveToWantsWithDiscogsData(this._data.discogsData,d,a)},onDetailContainerActivate:function(j,m,t,c){console.log(\"DetailContainer: activated\");var w=this;var y=j._data.discogsData;var n=w.down(\"#detailContent\").down(\"#detailImageContainer\").down(\"#detailImage\");n.setSrc(y.images[0].uri150);var e=Ext.getBody().getWidth();var h=n.getHeight()/n.getWidth();var r=h*e;n.setHeight(r);var a=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailAlbum\");a.setHtml(y.title);var v=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailArtist\");v.setHtml(y.artists[0].name);var u=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailRecord\");u.setHtml(y.labels[0].name+\" \"+y.year+\" \"+y.country+\" \"+y.labels[0].catno);var f=\"\";for(var l=0;l<y.tracklist.length;l++){var x=y.tracklist[l];f+=\"<div><span class='detailTracks-position'>\"+x.position+\"</span><span class='detailTracks-title'>\"+x.title+\"</span><span class='detailTracks-duration'>\"+x.duration+\"</span></div>\"}var k=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailTracks\");k.setHtml(f);var q=j._data.friends;var p=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailFriends\");if(q.length===0){p.setHtml(\"None of your friend have this\")}else{var d=\"<div>Friends who have this </div>\";for(var l in q){d+=\"<div>\"+q[l].attributes.username+\"</div>\"}p.setHtml(d)}var i=j._data.status;if(i.inCollection){var g=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#recordButtonsContainer\").down(\"#addToCollectionButton\");g.setDisabled(true);var s={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};g.setStyle(s)}if(i.inWants){var b=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#recordButtonsContainer\").down(\"#addToWantsButton\");b.setDisabled(true);var s={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};b.setStyle(s)}var o=j._data.image;clearInterval(w.imagePolling);w.imagePolling=setInterval(function(){getLocalImages([o],function(z){if(z.status==200||z.status==204){clearInterval(w.imagePolling);if(z.results){n.setSrc(z.results[0])}}})},2500)},onDetailContainerRemove:function(a,d,b,c){if(this.imagePolling){clearInterval(this.imagePolling)",554318,32,"Feed",546143,33,"config:{id:\"Feed",547052,69,"Feed",547131,46,"feed",547187,90,"v",547278,55,"feed",547343,65,"feed",547418,71,"Feed",556284,38,"feedHomeButton\"},{fn:\"onFeed",547577,41,"Feed",556351,57,"feed",556414,254,",onFeed",547958,51,"Feed",548019,52,"g",548072,36,"g);var f",553774,40,"FeedItem\",data:g});d.down(\"#feedItems\").setStore(f",548253,38,"Feed",548301,69,"Feed",548380,53,"Feed",557718,64,"feed",557792,36,"feed",557838,55,"vbox\",items:[{xtype:\"container\",id:\"Name",547052,40,"component\",flex:2,html:\"Text\",itemId:\"title\",margin:\"0 0 0 5%\",padding:\"3 0 0 0\"},{xtype:\"container\",flex:1,html:'<p align=\"right\">hours ago</p>',id:\"TimeContainer\",margin:\"0 5% 0 0\",padding:\"0 0 10 10\"},{xtype:\"container\",centered:false,docked:\"bottom\",height:240,id:\"ReleaseContainer\",margin:\"5%\",width:\"90%\",layout:\"vbox\",items:[{xtype:\"image\",centered:true,height:240,itemId:\"releaseimg\",maxWidth:\"100%\",width:\"100%\",backgroundCls:\"detailImageBackground\",src:\"\"}]}]}],listeners:[{fn:\"onReleaseimgError\",event:\"error\",delegate:\"#releaseimg\"}]},onReleaseimgError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder-large.png\")",432125,37,";if(c){d.down(\"#NameContainer\").down(\"#ReleaseContainer\").down(\"#releaseimg\").setSrc(c.get(\"recordThumb\"));var b=c.get(\"userActivity\")==\"addWants\"?\"wants\":\"added\";var a=\"<b>\"+c.get(\"username\")+\"</b> \"+b+\"<br>\"+c.get(\"recordArtist\")+\" - \"+c.get(\"recordName\");d.down(\"#NameContainer\").down(\"#title\").setHtml(a);d.down(\"#NameContainer\").down(\"#TimeContainer\").setHtml('<p align=\"right\">'+c.get(\"timeAgo\")+\"</p>\");d.callParent(arguments)",554318,32,"Wants",546143,33,"config:{id:\"CollectionContainer1\",",555646,38,"docked:\"top\",title:\"Wants",547131,66,"1",547197,136,"want",547343,214,"1\"},{fn:\"onWants",547577,371,"Wants",547958,129,"wants",548097,128,"want",548235,56,"Wants",548301,69,"Wants",548380,48,558374,498,",\"DetailItem\",\"Feed",558867,233,",\"DetailContainer\",\"FeedContainer\",\"FeedDataItem\",\"WantsContainer",559099,93,",\"DetailController\",\"FeedController\",\"OAuth",559181,134,"OAuth",546143,33,"config:{id:\"OAuthContainer\",style:\"background-color: white;\",items:[{xtype:\"label\",html:\"To get started with Recccords, please connect us to use your Discogs account.  We use Discogs to get your collections, wants, and record information.\",padding:20,style:\"line-height: 1.6em;\"},{xtype:\"button\",id:\"connectButton\",margin:\"0 25\",minHeight:50,text:\"Connect to Discogs\"},{xtype:\"label\",html:\"You are logged in as \",id:\"profileLabel\",padding:\"20 0 0 0\",style:\"text-align: center; font-size: 0.7em;\"},{xtype:\"button\",html:\"Logout\",id:\"logoutUserButton\",style:\"border: none; font-size: 0.7em;\",text:\"Logout\"}]",428911,42,"var a=getParseUser();this.down(\"#profileLabel\").setHtml(\"Logged in as \"+a.get(\"username\"))",555568,32,"tart",546143,48,559368,326]