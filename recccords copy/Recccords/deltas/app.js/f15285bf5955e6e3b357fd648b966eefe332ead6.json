["function _a35b413eb4202831b8f03c6a2916c49378a8ae99",50,288554,"abel",429887,32,"abel",412703,37,"label\"",288583,256842,",{name:\"recordThumb\"},{name:\"discogsId",544875,35,"DetailItem",544672,48,"resource_url\"},{name:\"title\"},{name:\"artistlabel\"},{name:\"y",545420,32,"model.FeedItem",544672,48,545350,75,",{name:\"recordThumb\"},{name:\"timeAgo\"},{name:\"username\"},{name:\"userActivity",545423,352,"username",545792,112,546706,49,"login",546768,59,545994,614,"password",546612,51," \"",546679,4230,"var f=getParseUser();me.launchUserScreen(me,f)};me",549903,52,551101,356,551479,265,"a",556407,46,551812,65,"var b=getParseUser();if(b){me.launchUserScreen(me,b)}else{me.getViewport().add(a);",552089,427,",launchUserScreen:function(b,a){parseCheckToken(function(c){console.log(\"in launch verify token is \"+c);if(c){console.log(\"MyController: redirecting to FEED\");b",551968,92,"b.feed",549504,32,"FeedContainer\",{});b",551840,37,"b.getViewport().add(b.feedView)}else{console.log(\"MyController: redirecting to OAUTH\");b.oauth",549504,32,"OAuthContainer\",{});b",551840,37,"b.getViewport().add(b.oauthView)",552512,232,",\"button#feedButton\":{tap:\"onFeedTap\"},\"button#wantsViewButton\":{tap:\"onWants",549365,51,552739,400,",onFeedTap:function(d,f,c){feed",549504,32,"Feed",553020,103,"feedView)},onWantsTap:function(d,f,c){wants",549504,32,"Wants",553020,103,"wantsView)},onDiscogsTap:function(d,f,c){oauth",549504,32,"OAuth",553020,103,"oauth",553133,332,"action:\"onSearchfieldAction",553492,61,"},\"#searchResultsItems\":{itemtap:\"onItemTap\"},\"container#searchContainer\":{remove:\"onSearchContainerRemove\"}}},onSearchfieldAction:function(c,f,a){var d=c.getValue().trim();var b=this;b.clearImageInterval();if(d.length>0){searchDiscogs(d,function(e,i,j){console.log(\"SearchCallBack: begin ------------\");console.log(e);console.log(\"SearchCallBack: end ------------\");if(i>0){var g=new ",548096,39,"Release\",data:e.results});b",553855,34,"g);var h=setInterval(function(){getLocalImages(j,function(l){if(l.status==200||l.status==204){b.clearImageInterval();if(l.results){for(var m=0;m<l.results.length;m++){var k=g.getAt(m);k.set(\"thumb\",l.results[m])}}}})},2500);b.setImageInterval(h)}else{console.log(\"SearchCallBack: no results\")}})}",553964,123,"h,a,g,d){console.log(\"SearchController: onItemtap: \"+h._record.data.id);var f=this;f.clearImageInterval();f.successCB=function(j){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"SearchController: results from getRecordDiscogsAndUserData: \");console.log(j);var i=Ext.create(\"Recccords.view.DetailContainer\",{});i.setData(j);var e=f.getViewport();e.add(i);Ext.Viewport.setActiveItem(i)};f.failCB=function(e){console.log(\"SearchController: getRecordDiscogsAndUserData failed error : \"+e)};h.setStyle(\"background-color:rgb(200,200,200);\");getRecordDiscogsAndUserData(h._record.data.id,f.successCB,f.failCB)},onSearchContainerRemove:function(a,d,b,c){this.clearImageInterval()},clearImageInterval:function(){if(this.imagePollingInterval){clearInterval(this.imagePollingInterval)}},setImageInterval:function(a){this.clearImageInterval();this.imagePollingInterval=a",554120,177,",detailContainer:\"#detailContainer",553398,34,"#collectionItems\":{itemtap:\"onDataviewItemTap\"}}},onDataviewItemTap:function(b,c,h,a,g,d){console.log(\"CollectionController: onDataviewItemtap: \"+h._record.data.discogsId);var f=this;f.successCB=function(j){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"CollectionController: results from getRecordDiscogsAndUserData: \");console.log(j);var i=Ext.create(\"Recccords.view.DetailContainer\",{});i.setData(j);i.down(\"#detailBar\").setTitle(j.discogsData.title);var e=f.getViewport();e.add(i);Ext.Viewport.setActiveItem(i)};f.failCB=function(e){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"CollectionController: getRecordDiscogsAndUserData failed error : \"+e)};h.setStyle(\"background-color:rgb(200,200,200);\");getRecordDiscogsAndUserData(h._record.data.discogsId,f.successCB,f",548373,34,"controller.Detail",552560,53,"detailContainer:\"#detailContainer\"},control:{\"button#recordBackButton\":{tap:\"onButtonTap\"}}},onButton",551437,33,"onbackbutton\");b.getParent().getParent().getParent().remove(b.getParent().getParent()",554119,38,"Feed",552560,85,"#wantItems\":{itemtap:\"onDataviewItemTap\"}}},onDataviewItemTap:function(b,c,h,a,g,d){console.log(\"CollectionController: onDataviewItemtap: \"+h._record.data.discogsId);var f=this;f.successCB=function(j){h.setStyle(\"background-color:rgb(255,255,255);\");console.log(\"CollectionController: results from getRecordDiscogsAndUserData: \");console.log(j);var i=Ext.create(\"Recccords.view.DetailContainer\",{});i.setData(j);i.down(\"#detailBar\").setTitle(j.discogsData.title);var e=f.getViewport();e.add(i);Ext.Viewport.setActiveItem(i)};f.failCB=function(e){console.log(\"CollectionController: getRecordDiscogsAndUserData failed error : \"+e)};getRecordDiscogsAndUserData(h._record.data.discogsId,f.successCB,f",548373,34,"controller.OAuth",552560,53,"oauthContainer:\"#oauthContainer\"},control:{\"button#connectButton\":{tap:\"onConnectButtonTap\"},\"button#logoutUserButton\":{tap:\"onLogoutUserButtonTap\"}}},onConnectButtonTap:function(b,c,a){window.location.href=\"/auth/connect\"},onLogoutUserButton",551437,39," tapped\");parseLogOut(",548380,32,"Lis",559248,48,554380,664,"scrollable:\"vertical\",items:[",555312,46,"25 25 15 25\"",555258,41,"Search\"},{xtype:\"button\",id:\"feedButton\",margin:\"0 25 15 25\"",555258,41,"Feed",555181,58,"15 25\"",555258,74,"wantsViewButton\",margin:\"0 25 15 25\"",555258,41,"Wants\"},",555051,50,"0 25 15 25\",minHeight:3",555257,42,555167,37,555452,43,"3",555257,42,"Logout",545423,34,555578,47,"id:\"search",547031,49,555663,373,"id:\"searchResults",547031,40,547277,35,556100,815,557933,39,",src:\"\"",556960,186,",listeners:[{fn:\"onImgError\",event:\"error\",delegate:\"#img\"},{fn:\"onBtnTap\",event:\"tap\",delegate:\"#btn\"}]},onImgError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder.png\")},onBtnTap:function(d,g,c){var b=this.getRecord();var f",557345,51,"var a",557404,59,"saveToCollection(b.data,f,a);g.stopPropagation()",558047,73,557219,117,558255,48,557682,365,",listeners:[{fn:\"onImgError\",event:\"error\",delegate:\"#img\"}]},onImgError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder.png\")",558047,256,"view.Detail",546976,45,"DetailContainer",547327,34,"layout:\"fit",547054,39,"id:\"detailBar\",title:\"Record\",items:[{xtype:\"button\",id:\"recordBackButton\",ui:\"back\",text:\"Back\"}]},{xtype:\"container\",id:\"detailContent\",layout:\"vbox\",scrollable:\"vertical\",items:[{xtype:\"container\",centered:false,height:260,id:\"detailImageC",559350,39,"image\",flex:1,height:240,id:\"detailImage\",itemId:\"myimg1\",maxWidth:\"100%\"",557832,32,"zIndex:11,backgroundCls:\"detailImageBackground\"}]},{xtype:\"container\",id:\"textContainer",547327,34,"zIndex:100,layout:\"vbox\",items:[{xtype:\"container\",id:\"recordButtonsContainer\",margin:\"10 10 ",555692,33,"\",id:\"addToCollectionButton\",itemId:\"mybutton15\",padding:\"5 0 0 0 \",width:146,text:\"Add to ",555299,33,"addToWantsButton\",itemId:\"mybutton16\",padding:\"5 0 0 0 \",width:146,text:\"Add to Wants\"}]},{xtype:\"container\",html:\"Album  Name\",id:\"detailAlbum\",margin:\"10 10 0 10\"},{xtype:\"container\",html:\"Artist Name\",id:\"detailArtist\",margin:\"0 10 \",layout:\"vbox\"},{xtype:\"container\",html:\"Label Year US 123456\",id:\"detailRecord\",margin:\"0 10 \",layout:\"vbox\"},{xtype:\"container\",html:\"Friends who have this\",id:\"detailFriends\",margin:\"0 10\",padding:\"0 0 10 0\"},{xtype:\"container\",html:\"Track list\",id:\"detailTracks\",margin:\"10 10\"}]}]}],listeners:[{fn:\"onDetailImageError\",event:\"error\",delegate:\"#detailImage\"},{fn:\"onAddToCollection",556267,34,"addToCollectionButton\"},{fn:\"onAddToWants",556267,34,"addToWantsButton\"},{fn:\"onDetail",547556,36,",{fn:\"onDetailContainerRemove\",event:\"remove\"}]},onDetailImageError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder-large.png\")},onAddToCollectionButton",549630,33,"DetailContainer: onAddToCollectionButtonTap\");var d=function(e){c.setDisabled(true);var g={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};c.setStyle(g);Ext.Msg.alert(\"Added to Collection\")};var a=function(e){console.log(\"error \"+e);Ext.Msg.alert(\"Error adding to Collection\")};saveToCollectionWithDiscogsData(this._data.discogsData,d,a)},onAddToWantsButton",549630,33,"DetailContainer: onAddToWantsButtonTap\");var d=function(e){c.setDisabled(true);var g={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};c.setStyle(g);Ext.Msg.alert(\"Added to Wants\")};var a=function(e){console.log(\"error \"+e);Ext.Msg.alert(\"Error adding to Wants\")};saveToWantsWithDiscogsData(this._data.discogsData,d,a)},onDetailContainerActivate:function(j,m,t,c){console.log(\"DetailContainer: activated\");var w=this;var y=j._data.discogsData;var n=w.down(\"#detailContent\").down(\"#detailImageContainer\").down(\"#detailImage\");n.setSrc(y.images[0].uri150);var e=Ext.getBody().getWidth();var h=n.getHeight()/n.getWidth();var r=h*e;n.setHeight(r);var a=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailAlbum\");a.setHtml(y.title);var v=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailArtist\");v.setHtml(y.artists[0].name);var u=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailRecord\");u.setHtml(y.labels[0].name+\" \"+y.year+\" \"+y.country+\" \"+y.labels[0].catno);var f=\"\";for(var l=0;l<y.tracklist.length;l++){var x=y.tracklist[l];f+=\"<div><span class='detailTracks-position'>\"+x.position+\"</span><span class='detailTracks-title'>\"+x.title+\"</span><span class='detailTracks-duration'>\"+x.duration+\"</span></div>\"}var k=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailTracks\");k.setHtml(f);var q=j._data.friends;var p=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#detailFriends\");if(q.length===0){p.setHtml(\"None of your friend have this\")}else{var d=\"<div>Friends who have this </div>\";for(var l in q){d+=\"<div>\"+q[l].attributes.username+\"</div>\"}p.setHtml(d)}var i=j._data.status;if(i.inCollection){var g=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#recordButtonsContainer\").down(\"#addToCollectionButton\");g.setDisabled(true);var s={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};g.setStyle(s)}if(i.inWants){var b=w.down(\"#detailContent\").down(\"#textContainer\").down(\"#recordButtonsContainer\").down(\"#addToWantsButton\");b.setDisabled(true);var s={\"background-color\":\"#D1D1D1\",color:\"#8A8A8A\"};b.setStyle(s)}var o=j._data.image;clearInterval(w.imagePolling);w.imagePolling=setInterval(function(){getLocalImages([o],function(z){if(z.status==200||z.status==204){clearInterval(w.imagePolling);if(z.results){n.setSrc(z.results[0])}}})},2500)},onDetailContainerRemove:function(a,d,b,c){if(this.imagePolling){clearInterval(this.imagePolling)",554297,32,"Feed",546976,45,"Feed",547031,69,"Feed",555692,46,"feed",547166,90,"v",556045,55,"feed",547322,65,"feed",547397,71,"Feed",556263,38,"feedHomeButton\"},{fn:\"onFeed",547556,41,"Feed",556330,57,"feed",556393,254,",onFeed",547937,51,"Feed",547998,52,"g",548051,36,"g);var f",548095,40,"FeedItem\",data:g});d.down(\"#feedItems\").setStore(f",548232,38,"Feed",548280,69,"Feed",548359,53,"FeedData",430024,46,"alias:\"widget.feed",557771,36,"feed",557817,55,"vbox\",items:[{xtype:\"container\",id:\"Name",547031,40,"component\",flex:2,html:\"Text\",itemId:\"title\",margin:\"0 0 0 5%\",padding:\"3 0 0 0\"},{xtype:\"container\",flex:1,html:'<p align=\"right\">hours ago</p>',id:\"TimeContainer\",margin:\"0 5% 0 0\",padding:\"0 0 10 10\"},{xtype:\"container\",centered:false,docked:\"bottom\",height:240,id:\"ReleaseContainer\",margin:\"5%\",width:\"90%\",layout:\"vbox\",items:[{xtype:\"image\",centered:true,height:240,itemId:\"releaseimg\",maxWidth:\"100%\",width:\"100%\",backgroundCls:\"detailImageBackground\",src:\"\"}]}]}],listeners:[{fn:\"onReleaseimgError\",event:\"error\",delegate:\"#releaseimg\"}]},onReleaseimgError:function(c,b,a){c.setSrc(\"https://s3.amazonaws.com/recccords/images/vinyl-placeholder-large.png\")",432125,37,";if(c){d.down(\"#NameContainer\").down(\"#ReleaseContainer\").down(\"#releaseimg\").setSrc(c.get(\"recordThumb\"));var b=c.get(\"userActivity\")==\"addWants\"?\"wants\":\"added\";var a=\"<b>\"+c.get(\"username\")+\"</b> \"+b+\"<br>\"+c.get(\"recordArtist\")+\" - \"+c.get(\"recordName\");d.down(\"#NameContainer\").down(\"#title\").setHtml(a);d.down(\"#NameContainer\").down(\"#TimeContainer\").setHtml('<p align=\"right\">'+c.get(\"timeAgo\")+\"</p>\");d",558254,49,"view.Wants",546976,64,"1",547040,60,"Wants",555692,46,"collectionHomeButton1",555773,43,556007,93,"want",547322,214,"1\"},{fn:\"onWants",547556,371,"Wants",547937,129,"wants",548076,128,"want",548214,56,"Wants",548280,69,"Wants",548359,48,558303,498,",\"DetailItem\",\"Feed",558796,233,",\"DetailContainer\",\"FeedContainer\",\"FeedDataItem\",\"WantsContainer",559028,93,",\"DetailController\",\"FeedController\",\"OAuth",559110,134,"OAuth",546976,45,"OAuthContainer\",style:\"background-color: white;\",items:[{xtype:\"label\",html:\"To get started with Recccords, please connect us to use your Discogs account.  We use Discogs to get your collections, wants, and record information.\",padding:20,style:\"line-height: 1.6em;\"},{xtype:\"button\",id:\"connectButton\",margin:\"0 25\",minHeight:50,text:\"Connect to Discogs\"},{xtype:\"label\",html:\"You are logged in as \",id:\"profileLabel\",padding:\"20 0 0 0\",style:\"text-align: center; font-size: 0.7em;\"},{xtype:\"button\",html:\"Logout\",id:\"logoutUserButton\",style:\"border: none; font-size: 0.7em;\",text:\"Logout\"}]",428911,42,"var a=getParseUser();this.down(\"#profileLabel\").setHtml(\"Logged in as \"+a.get(\"username\")",559212,411]